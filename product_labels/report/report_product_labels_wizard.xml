<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <report
                id="report_product_product_label"
                string="Product Label"
                model="product.product.label"
                report_type="qweb-pdf"
                file="product_label"
                name="product_labels.product_product_label"
        />

        <template id="product_product_label">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="label">
                    <div class="page">
                        <t t-foreach="label.label_lines" t-as="line">

                            <t t-set="image_barcode" t-value="'data:image/png;base64,%s' % line.barcode_image"/>
                            <!--
                            <t t-set="style" t-value="'''.barcode%s { background-repeat: no-repeat; background-size : %s; background-image: url('%s')}''' % (line.product_id.barcode,'100% 100%',image_barcode) "/>
                            <style><t t-esc="style"/></style>
                            -->
                            <t t-foreach="range(int(line.quantity))" t-as="range_line">

                                <div class="oe_structure"/>
                                <div class="row">
                                    <table style="width: 100%; border: 1px solid black; text-align: center;">

                                        <tr style="border: 1px solid black;">
                                            <td colspan="2">
                                                <h4>
                                                    <span t-field="line.product_id.name"/>
                                                </h4>
                                            </td>
                                        </tr>
                                        <tr style="border: 1px solid black;">
                                            <td colspan="2">
                                                <h4>
                                                    <span>Code:</span>
                                                    <span t-field="line.product_id.default_code"/>
                                                </h4>
                                            </td>
                                        </tr>
                                        <tr style="border: 1px solid black;">
                                            <td colspan="2">
                                                <span t-if="line.product_id.barcode">
                                                    <!--
                                                    <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;humanreadable=1' % ('EAN13', line.product_id.barcode, 300, 100)" style="margin-top: 5px; width:300px; height:100px"/>
                                                    <img t-att-class="'barcode%s' % line.product_id.barcode"   style="margin-top: 5px; width:300px; height:100px"/>
                                                    -->
                                                    <img t-att-src="image_barcode"
                                                         style="margin-top: 5px; width:300px; height:100px"/>

                                                    <!-- <h5><span t-esc="line.product_id.barcode" /></h5> -->

                                                </span>
                                            </td>
                                        </tr>
                                    </table>
                                </div>

                            </t>
                        </t>
                    </div>
                </t>
            </t>
        </template>

    </data>
</openerp>